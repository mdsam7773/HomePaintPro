{% extends 'base.html' %}
{% block content %}

<h3>All Bookings</h3>

<table class="table table-bordered table-hover">
    <thead class="table-primary">
        <tr>
            <th>Date</th>
            <th>Client</th>
            <th>Phone</th>
            <th>Area Type</th>
            <th>Painter</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
    </thead>

    <tbody>
        {% for b in bookings %}
        <tr>
            <td>{{ b.created_at.strftime('%d-%m-%Y') }}</td>
            <td>{{ b.name }}</td>
            <td>{{ b.phone }}</td>
            <td>{{ b.area_type }}</td>

            <td>
                {% if b.painter %}
                    {{ b.painter.name }}
                {% else %}
                    <span class="text-danger fw-bold">Not Assigned</span>
                {% endif %}
            </td>

            <td>
                {% if b.status == "Pending" %}
                  <span class="badge bg-warning">{{ b.status }}</span>
                {% elif b.status == "In Progress" %}
                  <span class="badge bg-primary">{{ b.status }}</span>
                {% elif b.status == "Completed" %}
                  <span class="badge bg-success">{{ b.status }}</span>
                {% else %}
                  <span class="badge bg-secondary">{{ b.status }}</span>
                {% endif %}
            </td>

            <td>
                <a href="/update/{{b.id}}" class="btn btn-sm btn-warning">View / Assign</a>
                <a href="/delete/{{b.id}}" class="btn btn-sm btn-danger"
                   onclick="return confirm('Delete this booking?')">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
